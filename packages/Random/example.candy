[print] = use "Builtins"
[int, list] = use "Core"
[Distributions: [uniform], rng, Rngs: [Pseudo: [xorshift]]] = use ".."

main _ :=
  # TODO: use a random seed
  generator = list.filled 16 0 | xorshift.fromSeed | xorshift.asRng
  print "Initial RNG: {generator}"

  [generator, bytes] = generator | rng.nextBytes 10
  print "Random bytes: {bytes}"

  [generator, values] = generator | rng.nextList 10 uniform.nextBool
  print "Random booleans: {values}"

  [generator, values] = generator | rng.nextList 10 { it -> it | uniform.nextIntInRange 1 7 }
  print "Random dice rolls: {values}"

  [generator, values] =
    generator | rng.nextList 10 { it -> it | uniform.nextFromList (Foo, Bar, Baz) }
  print "Random items from given list: {values}"

  [generator, values] = generator
    | rng.nextList 10 { it -> it | uniform.nextFromDistributions (uniform.nextUnsignedByte, uniform.nextBool) }
  print "Random items from given distributions: {values}"

  [generator, values] = generator | rng.nextList 10 { it ->
    it | uniform.nextResult { it -> it | uniform.nextUnsignedByte } { it -> it | uniform.nextBool }
  }
  print "Random results of int or bool: {values}"
