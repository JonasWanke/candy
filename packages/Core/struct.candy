builtins = use "Builtins"
[ifElse] = use "..controlFlow"
type = use "..type"

is value := type.is value Struct

hasKey struct key :=
  needs (is struct)
  struct | builtins.structHasKey key

get struct key :=
  needs (is struct)
  ifElse (struct | hasKey key) { Ok (struct | builtins.structGet key) } {
    Error "Key {key} not found in struct"
  }

getKeys struct :=
  needs (is struct)
  struct | builtins.structGetKeys
