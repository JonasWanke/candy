[ifElse, int, recursive] = use "Core"
[add, subtract, isLessThan] = int

fibonacci n =
  needs (int.is n)
  recursive n { recurse n ->
    ifElse (n | isLessThan 2) { n } { add (recurse (n | subtract 1)) (recurse (n | subtract 2)) }
  }

main environment := fibonacci 20
